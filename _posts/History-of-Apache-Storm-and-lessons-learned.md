## Apache Storm 的历史与教训
作者：Nathanmarz &nbsp; 译者：徐软件 &nbsp; [[原文链接](http://eli.thegreenplace.net/2011/01/23/how-debuggers-work-part-1)]

Apache Storm 最近成为顶级项目，这对于项目，对于我个人，都有巨大的里程碑意义。想到 Storm 四年前仅仅是我脑海中的一个想法，而今天已经蒸蒸日上，拥有庞大的社区、海量的用户，这一切太疯狂了。在这里，我想回顾一下 Storm 一路走来的历程，还有中间的一些教训。

![storm logo](http://nathanmarz.com/storage/storm_logo.png)

我将讲述在 Storm 发展到某些时间点，不得不面对的关键挑战。本文前 25% 介绍 Storm 的萌芽和初创阶段，一些重要技术问题得以解决，所以 Storm 诞生了；之后的 75% 是发布，并且使其成为一个被广泛使用，社区中拥有活跃的用户和开发者，主要介绍市场营销、沟通和社区发展。

任何一个成功的项目都依赖于两个条件：

1. 它确实解决了问题
2. 证明它是很多用户最好的选择

我认为很多开发者都没能真正理解，达到第二个条件与构建项目同样有趣和困难。读完 Storm 的历程，希望你能理解这一点。

### Storm 之前
Storm 起源于我在 BackType 的工作。BackType 的 产品用于帮助商业界分析和理解他们对社会媒体的影响，包括历史上的和实时的。没有 Storm 的时候，我们使用标准的 queue 和 worker 完成实时的部分。例如，我们可以将 Twiiter firehose 写进一个 queue，然后 Python（worker） 可以读取这些 tweet 和处理。通常，worker 可以通过新的queue 发送消息给其他 worker，然后更进一步处理。

我们不满足于这种实现。它不鲁棒 —— 需要确保所有的 queue 和 worker 正常运行，且很难使用。其中大部分困难的逻辑，是如何发送/接受消息，如何序列化/反序列化，等等。真正的业务逻辑占的代码量很少。实现也不优雅 —— 一个应用需要运行在许多 worker 上，但却是一台台分别部署的。似乎应用中的所有逻辑都要非常完备。

### 第一个想法
2010 年 12 月，我有了重大的领悟。就在那时，我想到了一种分布式的抽象 —— 流（stream）。流可以并行的产生和处理，但这也可以抽象成一个单独的程序。这让我想到了 spouts 和 bolts —— 一个 spout 是产生最初的流，一个 bolt 读取流，处理并输出新的流。其中最重要的是，spouts 和 bolts 天生是并行的，如果 Hadoop 中的 mappers 和 reducers。Bolts 可以指定输入的流，以及输入时的分组方式。最终，最高层的抽象结果是拓扑（topology）—— 一个包含 spouts 和 bolts 的网络。

